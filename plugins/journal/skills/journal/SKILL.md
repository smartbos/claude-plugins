---
name: journal
description: Use when user wants to record a journal entry with /j or /journal. Supports direct entry, conversation summary, or clarification for vague content.
aliases:
  - j
---

# Journal Entry Skill

빠르게 저널에 기록하는 스킬. 세 가지 모드 지원:

## 사용법

1. **직접 기록**: `/j 내용` - 내용을 바로 저널에 기록
2. **대화 요약**: `/j` (내용 없이) - 최근 대화를 요약해서 기록
3. **명확화 후 기록**: 내용이 모호하면 질문으로 명확화

## 시간대

**중요**: 모든 날짜/시간은 KST(한국 표준시, UTC+9) 기준으로 처리한다.

현재 KST 시간 확인 방법:
```bash
TZ='Asia/Seoul' date '+%Y-%m-%d %H:%M %a'
```

## 저널 파일 위치

저널 루트(`01.journals/`) 아래: `01.journals/연/월/일 요일.md`

예시: `01.journals/2026/02/05 목.md`

요일 표기: 월, 화, 수, 목, 금, 토, 일

**참고**: 파일 경로의 날짜도 KST 기준이다. 예를 들어 UTC로 2월 5일 23:30이어도 KST로는 2월 6일 08:30이므로 `06 목.md`에 기록한다.

### 저널 루트 탐색 (하이브리드 방식)

저널 루트 경로는 다음 순서로 결정한다:

1. **캐시 확인**: `.claude/journal.local.md` 파일이 존재하고, YAML frontmatter에 `journal_root` 값이 있으면 → 해당 경로 사용
2. **CWD 확인**: 현재 디렉토리에 `01.journals/` 가 있으면 → 사용하고 캐시에 저장
3. **하위 탐색**: `find . -maxdepth 3 -type d -name "01.journals" | head -5` 실행
   - 1개 발견 → 사용하고 캐시에 저장
   - 2개 이상 발견 → AskUserQuestion으로 선택 요청, 선택된 경로 캐시에 저장
   - 0개 발견 → AskUserQuestion으로 생성 위치 질문, 생성 후 캐시에 저장

### 캐시 파일 형식 (`.claude/journal.local.md`)

```yaml
---
journal_root: ./01.journals
---
```

`journal_root`는 CWD 기준 상대 경로 또는 절대 경로. 캐시된 경로가 더 이상 유효하지 않으면(디렉토리 미존재) 다시 탐색한다.

## 동작 방식

### 모드 1: 직접 기록 (`/j 내용`)
사용자가 명확한 내용을 제공하면:
1. 내용 분석
2. 모호하면 → 모드 3으로 전환
3. 명확하면 → 저널 파일에 기록

### 모드 2: 대화 요약 (`/j`)
내용 없이 호출하면:
1. 이번 세션의 대화 내용 분석
2. 주요 작업/결정/배운 점 요약
3. 사용자에게 요약 내용 확인
4. 승인 시 저널에 기록

### 모드 3: 명확화 (`/j 모호한내용`)
내용이 불분명하면:
1. AskUserQuestion으로 구체화 질문
2. 답변으로 내용 보완
3. 저널에 기록

## 모호함 판단 기준
- 주어/목적어 불분명
- "그거", "이거" 같은 지시어만 있음
- 맥락 없이 단어만 나열
- 무엇을 했는지/배웠는지/결정했는지 불명확

## 저널 항목 형식

**중요**: 기존 파일 구조를 먼저 확인하고, 그 형식에 맞춰 기록한다.

### 케이스 1: 타임라인 형식 (`### HH:MM ~ HH:MM`)
기존 파일에 `### 09:00 ~ 09:30` 같은 30분 단위 타임라인이 있으면:
- 현재 시간에 해당하는 섹션을 찾아서 그 아래에 내용 추가
- 예: 17:41이면 `### 17:30 ~ 18:00` 섹션 바로 아래에 기록
- 새 헤더나 구분선 추가하지 않음
```markdown
### 17:30 ~ 18:00
저널 플러그인 추가 성공
### 18:00 ~ 18:30
```

### 케이스 2: 새 파일 또는 타임라인 없음
타임라인 형식이 없으면 기존 방식대로:
```markdown
## HH:MM (KST)

[내용]

---
```

## 구현 단계

1. **KST 시간 확인**: `TZ='Asia/Seoul' date '+%Y %m %d %a %H:%M'` 실행하여 현재 KST 날짜/시간 획득
2. **저널 루트 탐색** (위 "저널 루트 탐색" 섹션 참고):
   a. `.claude/journal.local.md`의 `journal_root` 확인 → 경로가 유효하면 사용
   b. 없거나 무효하면 → CWD에 `01.journals/` 존재 확인
   c. 없으면 → `find . -maxdepth 3 -type d -name "01.journals"` 로 탐색
   d. 결과에 따라 사용 or 사용자에게 질문
   e. 확정된 경로를 `.claude/journal.local.md`에 저장
3. **인자 확인**: 내용이 있는지 없는지 확인
4. **모드 결정**:
   - 내용 없음 → 대화 요약 모드
   - 내용 있음 → 명확성 검사
5. **명확성 검사** (내용 있을 때):
   - 명확하면 → 바로 기록
   - 모호하면 → AskUserQuestion으로 구체화
6. **저널 디렉토리 확인**: `{journal_root}/연/월/` 없으면 생성 (KST 기준 연/월)
7. **기존 파일 구조 확인**: 파일이 존재하면 Read로 읽어서 타임라인 형식(`### HH:MM ~ HH:MM`) 유무 확인
8. **파일에 기록**:
   - 타임라인 있음 → 해당 시간대 섹션 찾아서 그 줄 바로 아래에 삽입 (Edit 사용)
   - 타임라인 없음 → 파일 끝에 추가 (append)
9. **확인 메시지**: 기록 완료 알림

## 예시
```
/j PR 10개 머지 완료, 배포는 내일부터 매일 1-2개씩 진행 예정
```
→ 명확함. 바로 기록.
```
/j 그거 했음
```
→ 모호함. "무엇을 했나요?" 질문 후 기록.
```
/j
```
→ 대화 요약 모드. 이번 세션에서 한 일 정리해서 보여주고 확인 후 기록.